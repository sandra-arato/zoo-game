"use strict";angular.module("zooStoryApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("zooStoryApp").factory("Zoo",function(){function a(a,b,c,d,e,f){this.id=a,this.type=b,this.size=c,this.pos=d,this.color=e,this.controller=f,this.getCoordinates=function(){var a=[[this.pos[0],this.pos[1]+this.size[1]],[this.pos[0]+this.size[0],this.pos[1]+this.size[1]],[this.pos[0]+this.size[0],this.pos[1]],[this.pos[0],this.pos[1]]];return a},this.checkIfCollide=function(a){var b=this.getCoordinates();return b[1][0]>a.getCoordinates()[0][0]&&b[0][0]<a.getCoordinates()[0][0]?a:b[1][0]>a.getCoordinates()[1][0]&&b[0][0]<a.getCoordinates()[1][0]?a:!1}}return a.prototype={constructor:a,tell:function(a){console.log(a+" property is "+this[a])},moves:"obstacle"!==this.type},a}).factory("Hero",["Zoo",function(a){var b=angular.copy(a);return b.prototype={run:function(){},shoot:function(){console.log("phew phew")}},b}]).factory("ZooKeeper",["Zoo",function(a){var b=angular.copy(a);return b}]).factory("ZooKeeperZombie",["ZooKeeper",function(a){var b=angular.copy(a);return b.prototype={doCrazyStuff:function(){}},b}]).factory("Exit",["Zoo",function(a){var b=angular.copy(a);return b.prototype={winGame:function(){console.log("You won")}},b}]).controller("MainCtrl",["$scope","$document","Zoo","ZooKeeper","ZooKeeperZombie","Hero","Exit",function(a,b,c,d,e,f,g){function h(a,b,c){b.on("keydown",function(){if(37===event.keyCode){var b=parseInt(a.css("left"));if(l.pos[0]=b,0>b)return;a.css("left",b-4);for(var d=1;d<c.ZooParts.length;d++){var e=l.checkIfCollide(c.ZooParts[d]);if("obstacle"===e.type)return void console.log("you ran into a rock");if("enemy"===e.type)return console.log("oh you died sorry"),l.pos[0]=0,l.pos[1]=0,void a.css("opacity",.3)}}if(39===event.keyCode){if(b=parseInt(a.css("left")),l.pos[0]=b,b>940-l.size[0])return;for(var f=1;f<c.ZooParts.length;f++){if(e=l.checkIfCollide(c.ZooParts[f]),"obstacle"===e.type)return void console.log("you ran into a rock");if("enemy"===e.type)return console.log("oh you died sorry"),l.pos[0]=0,l.pos[1]=0,void a.css("opacity",.3)}a.css("left",b+4)}38===event.keyCode&&(a.addClass("jump"),setTimeout(function(){a.removeClass("jump")},100))})}function i(a){setInterval(function(){return a.hasClass("moveright")?void a.removeClass("moveright"):void a.addClass("moveright")},1200)}function j(){}function k(){}var l=new f("monkeyMike","hero",[20,60],[10,480],"#a87d20",h);a.ZooParts=[l,new d("zooKeeper","enemy",[30,70],[420,470],"blue",i),new d("zooKeeper2","enemy",[30,70],[580,210],"blue",i),new e("zooKeeper3","enemy",[25,60],[240,480],"blue",i),new c("rock","obstacle",[40,40],[370,500],"black",j),new c("rock","obstacle",[80,40],[130,500],"black",j),new c("rock","obstacle",[120,40],[570,500],"black",j),new c("rock","obstacle",[240,20],[540,280],"black",j),new c("rock","obstacle",[180,20],[760,420],"black",j),new g("GoldenGate","exit",[40,80],[880,340],"#eef26b",k)]}]);